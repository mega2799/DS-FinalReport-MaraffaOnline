<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>main</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="latex2html.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#list-of-abbreviations" id="toc-list-of-abbreviations">List
of Abbreviations</a></li>
<li><a href="#glossario-dei-termini"
id="toc-glossario-dei-termini">Glossario dei termini</a></li>
<li><a href="#ch:into" id="toc-ch:into">Introduction</a></li>
<li><a href="#ch:analisi" id="toc-ch:analisi">Analisi</a>
<ul>
<li><a href="#obiettivi" id="toc-obiettivi">Obiettivi</a></li>
<li><a href="#politiche-di-autovalutazione"
id="toc-politiche-di-autovalutazione">Politiche di
autovalutazione</a></li>
<li><a href="#requisiti" id="toc-requisiti">Requisiti</a></li>
<li><a href="#casi-duso" id="toc-casi-duso">Casi d’uso</a></li>
</ul></li>
<li><a href="#ch:architectures" id="toc-ch:architectures">Architettura e
Design</a>
<ul>
<li><a href="#design-generale-del-software"
id="toc-design-generale-del-software">Design generale del
software</a></li>
<li><a href="#micro-servizi-e-la-loro-architettura"
id="toc-micro-servizi-e-la-loro-architettura">Micro-servizi e la loro
architettura</a>
<ul>
<li><a href="#servizio-per-gestione-utenti"
id="toc-servizio-per-gestione-utenti">Servizio per Gestione
Utenti</a></li>
<li><a href="#servizio-business-logic"
id="toc-servizio-business-logic">Servizio Business Logic</a></li>
<li><a href="#servizio-ponte-tra-i-microservizi"
id="toc-servizio-ponte-tra-i-microservizi">Servizio ponte tra i
microservizi</a></li>
</ul></li>
<li><a href="#dsspe-perche-i-microservizi"
id="toc-dsspe-perche-i-microservizi">[DS/SPE] Perche’ i
microservizi?</a>
<ul>
<li><a href="#vantaggi-dellarchitettura-a-microservizi"
id="toc-vantaggi-dellarchitettura-a-microservizi">Vantaggi
dell’architettura a microservizi</a></li>
</ul></li>
<li><a href="#servizi-di-business-logic-e-user-service"
id="toc-servizi-di-business-logic-e-user-service">Servizi di Business
Logic e User Service</a>
<ul>
<li><a href="#business-logic" id="toc-business-logic">Business
Logic</a></li>
<li><a href="#user-service" id="toc-user-service">User Service</a></li>
</ul></li>
<li><a href="#front-end" id="toc-front-end">Front-End</a></li>
<li><a href="#middleware" id="toc-middleware">Middleware</a>
<ul>
<li><a href="#struttura-api-gateway"
id="toc-struttura-api-gateway">Struttura API Gateway</a></li>
</ul></li>
<li><a href="#punti-comuni-tra-i-servizi"
id="toc-punti-comuni-tra-i-servizi">Punti comuni tra i servizi</a></li>
</ul></li>
<li><a href="#ch:interazioni"
id="toc-ch:interazioni">Interazioni</a></li>
<li><a href="#ch:implementazione"
id="toc-ch:implementazione">Implementazione</a>
<ul>
<li><a href="#tecnologie" id="toc-tecnologie">Tecnologie</a></li>
<li><a
href="#parte-di-distribuiti-che-non-so-dove-mettere-sta-nellimpl-p.s.-dargli-un-nome-decente"
id="toc-parte-di-distribuiti-che-non-so-dove-mettere-sta-nellimpl-p.s.-dargli-un-nome-decente">Parte
di distribuiti che non so dove mettere, sta nell’impl? p.s. dargli un
nome decente</a></li>
<li><a href="#screen" id="toc-screen">Screen</a></li>
<li><a href="#optionalmockup"
id="toc-optionalmockup">Optional(Mockup)</a></li>
</ul></li>
<li><a href="#ch:DevOps" id="toc-ch:DevOps">DevOps</a>
<ul>
<li><a href="#git-wordkflow" id="toc-git-wordkflow">Git
wordkflow</a></li>
<li><a href="#issue-template" id="toc-issue-template">Issue
template</a></li>
<li><a href="#continuous-integration"
id="toc-continuous-integration">Continuous integration</a></li>
<li><a href="#build-automation" id="toc-build-automation">Build
automation</a></li>
</ul></li>
<li><a href="#ch:validazione"
id="toc-ch:validazione">Validazione</a></li>
<li><a href="#ch:deployment" id="toc-ch:deployment">Deployment</a>
<ul>
<li><a href="#deployment" id="toc-deployment">deployment</a></li>
</ul></li>
<li><a href="#ch:con" id="toc-ch:con">Conclusions and Future Work</a>
<ul>
<li><a href="#conclusions" id="toc-conclusions">Conclusions</a></li>
<li><a href="#future-work" id="toc-future-work">Future work</a></li>
</ul></li>
</ul>
</nav>
<div class="titlepage">
<div class="center">
<p><span>Sistemi distribuiti</span><br />
</p>
<p>Maraffa Online</p>
<p> <br />
<span> Sofia Tosi Matteo Santoro </span><br />
<span> <em>Supervisors:</em> Giovanni Ciatto, Matteo Magnani, Andrea
Omicini </span><br />
</p>
<p>2024-07-04</p>
</div>
</div>
<h2 id="list-of-abbreviations">List of Abbreviations</h2>
<div class="abbrv">
<p>School of Mathematical, Physical and Computational Sciences</p>
<p>Computer Science</p>
<p>GitHub Pages</p>
<p>Continuous Integration</p>
</div>
<h2 id="glossario-dei-termini">Glossario dei termini</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Nome</strong></th>
<th style="text-align: left;"><strong>Descrizione</strong></th>
<th style="text-align: left;"><strong>Sinonimi</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Mano</td>
<td style="text-align: left;">Distribuzione delle 40 carte ai 4
giocatori e la seguente serie di 10 prese</td>
<td style="text-align: left;">Round</td>
</tr>
<tr class="even">
<td style="text-align: left;">Presa</td>
<td style="text-align: left;">Quando ogni giocatore, a turno, gioca sul
tavolo una carta. L’ultima presa della mano vale 1 punto.</td>
<td style="text-align: left;">Trick</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Partita</td>
<td style="text-align: left;">Insieme di più mani fino al raggiungimento
del punteggio di 41 punti.</td>
<td style="text-align: left;">Game</td>
</tr>
<tr class="even">
<td style="text-align: left;">Partita corta</td>
<td style="text-align: left;">Insieme di più mani fino al raggiungimento
del punteggio di 31 punti.</td>
<td style="text-align: left;">Short Game</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Tavolo</td>
<td style="text-align: left;">Raggruppamento di 4 giocatori, suddivisi
in 2 coppie, i giocatori delle stessa squadra “siedono” in direzione
opposta</td>
<td style="text-align: left;">Table</td>
</tr>
<tr class="even">
<td style="text-align: left;">Seme</td>
<td style="text-align: left;">Tipologia distintiva di carta, ne esistono
4:</td>
<td style="text-align: left;"> </td>
</tr>
<tr class="odd">
<td style="text-align: left;">- Denari</td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
</tr>
<tr class="even">
<td style="text-align: left;">- Coppe</td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
</tr>
<tr class="odd">
<td style="text-align: left;">- Spade</td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
</tr>
<tr class="even">
<td style="text-align: left;">- Bastoni</td>
<td style="text-align: left;">Suit: -Coins -Cups -Swords -Clubs</td>
<td style="text-align: left;"> </td>
</tr>
<tr class="odd">
<td style="text-align: left;">Briscola</td>
<td style="text-align: left;">Seme con priorita’ piu’ alta.</td>
<td style="text-align: left;">Trump</td>
</tr>
<tr class="even">
<td style="text-align: left;">Maraffa</td>
<td style="text-align: left;">Se un giocatore possiede le tre carte di
valore maggiore (asso, due e tre, dette assieme "Maraffa" o "Cricca")
del seme di briscola, vince tre punti addizionali. In questo caso deve
scendere con l’asso di quel seme.</td>
<td style="text-align: left;">Cricca, Marafon, Tresette con la
Briscola</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Mazzo</td>
<td style="text-align: left;">40 carte, di 4 semi diversi</td>
<td style="text-align: left;"> </td>
</tr>
<tr class="even">
<td style="text-align: left;">1,2,3,4,5,6,7, fante, cavallo e re.</td>
<td style="text-align: left;">Deck</td>
<td style="text-align: left;"> </td>
</tr>
<tr class="odd">
<td style="text-align: left;">Taglio</td>
<td style="text-align: left;">Durante una mano in un seme viene giocato
il seme di briscola, che avendo priorita’ maggiore permette di prendere
nonostante il seme di gioco</td>
<td style="text-align: left;">Cut</td>
</tr>
<tr class="even">
<td style="text-align: left;">Busso</td>
<td style="text-align: left;">Invita il compagno, se possibile, a
conquistare la presa e ad aprire il turno successivo con lo stesso
seme</td>
<td style="text-align: left;">Knock</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Striscio corto</td>
<td style="text-align: left;">Quando si ha ancora in mano un basso
numero di carte dello stesso seme con cui si è aperto il turno.</td>
<td style="text-align: left;">Short strip</td>
</tr>
<tr class="even">
<td style="text-align: left;">Striscio lungo</td>
<td style="text-align: left;">Quando si ha ancora in mano molte carte
dello stesso seme con cui si è aperto il turno.</td>
<td style="text-align: left;">Long strip</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Volo</td>
<td style="text-align: left;">Quando non si hanno più carte del seme con
cui si è aperto il turno.</td>
<td style="text-align: left;">Fly</td>
</tr>
<tr class="even">
<td style="text-align: left;">Figura</td>
<td style="text-align: left;">Fante, Cavallo, Re, con punteggio di 1/3
di punto.</td>
<td style="text-align: left;">Figure</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Asso</td>
<td style="text-align: left;">Carta con valore di 1 punto.</td>
<td style="text-align: left;">Ace</td>
</tr>
<tr class="even">
<td style="text-align: left;">Due e Tre</td>
<td style="text-align: left;">Carte con valore 1/3 di punto.</td>
<td style="text-align: left;">Two and Three</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Carta Liscia</td>
<td style="text-align: left;">Carte con numeri 4, 5, 6, 7. Sono prive di
valore</td>
<td style="text-align: left;">Smooth paper</td>
</tr>
<tr class="even">
<td style="text-align: left;">Squadra</td>
<td style="text-align: left;">Coppie di giocatori seduti opposti</td>
<td style="text-align: left;">Team</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Giocatore</td>
<td style="text-align: left;">Persona che interagisce con
l’applicativo</td>
<td style="text-align: left;">Player, User</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chiamata fuori</td>
<td style="text-align: left;">Se un giocatore pensa che la sua squadra
abbia raggiunto i 41 punti (o 31 punti nella variante "corta" della
partita), la squadra può dichiarare di avere già nel mazzo delle prese i
punti per vincere e chiudere in anticipo l’ultima partita. In questo
modo la mano termina immediatamente, senza che vengano giocate le
restanti prese e la squadra che si è "chiamata fuori" impedisce
all’altra squadra di conquistare ulteriori prese. Se una squadra si
chiama fuori e, dopo aver contato i punti delle prese effettuate ed
averli sommati ai punti ottenuti nelle mani già giocate, non raggiunge i
punti per la vittoria (in gergo "sbaglia la chiamata") scatta automatico
l’11 a 0 per la squadra avversaria</td>
<td style="text-align: left;">Call out</td>
</tr>
<tr class="odd">
<td style="text-align: left;">non abbiamo messo l’altro significato di
mano</td>
<td style="text-align: left;"> </td>
<td style="text-align: left;"> </td>
</tr>
</tbody>
</table>
<h1 id="ch:into">Introduction</h1>
<h1 id="ch:analisi">Analisi</h1>
<h2 id="obiettivi">Obiettivi</h2>
<h2 id="politiche-di-autovalutazione">Politiche di autovalutazione</h2>
<p>persone le hanno messe, tipo Riccardo Sanità esempio politiche
autovalutazione Si devono seguire le regole per completare una sessione
di gioco. • Se un giocatore che non ‘e l’ultimo rimasto si disconnette
si disconnette la partita deve continuare. Nel caso in cui la partita
fosse ancora in e il giocatre disconneso si volesse riconnettere il
server far‘a in modo di mostrare al giocatre le carte che aveva al
momento della disconnessione • Se l’ultimo giocatore si disconnette
allora la partita deve terminare. • L’elenco delle partite aperte/chiuse
deve rimanere aggiornato. Inoltre, devono essere costantemente
sincronizzati i client dei giocatori all’interno della stessa partita,
in modo da garantire la coerenza del gioco. • L’obiettivo principale del
software sviluppato ‘e garantire una solida capacit‘a di adattamento
alle dimensioni, una fluidit‘a accettabile nell’esperienza di gioco e
una sufficiente resilienza agli errori. In modo specifico, il servizio
web necessita di gestire in modo efficace un grande numero di utenti
simultaneamente, mentre l’esecuzione del gioco deve risultare scorrevole
sul dispositivo dell’utente, evitando inconvenienti legati alle
prestazioni sia grafiche che funzionali. Inoltre, ‘e essenziale che il
sistema non si blocchi in caso di eventuali problemi.</p>
<p>se va giù uno dei servizi? se va giù il middleware?</p>
<h2 id="requisiti">Requisiti</h2>
<p>(molti li strutturano a FAQ, facendo domande)</p>
<h2 id="casi-duso">Casi d’uso</h2>
<h1 id="ch:architectures">Architettura e Design</h1>
<h2 id="design-generale-del-software">Design generale del software</h2>
<p>L’architettura del software è basata su micro-servizi autonomi e
indipendenti tra loro e la loro comunicazione avviene tramite API REST.
Esiste un middleware che si occupa della gestione e dell’orchestrazione
dei micro-servizi, facendo appunto da ponte collegando le varie diverse
tencologie.</p>
<p>I microservizi che si sono scelti di sviluppare si occupano di varie
aree legate alla natura del progetto e sono:</p>
<ul>
<li><p><strong>UserService</strong>: si occupa della gestione degli
utenti, quindi la loro registrazione, autenticazione e gestione dei dati
personali.</p></li>
<li><p><strong>BusinessLogic</strong>: si occupa di mantenere al proprio
interno tutte le regole proprie del gioco</p></li>
<li><p><strong>Front-End</strong>: si occupa di gestire l’interfaccia
grafica e la comunicazione con il middleware.</p></li>
<li><p><strong>Middleware</strong>: si occupa della gestione delle
comunicazioni tra i vari microservizi, e svolge la funzione di "motore
di gioco".</p></li>
</ul>
<p><img src="report/img/Architecture.png" style="width:12cm"
alt="image" /><br />
</p>
<h2 id="micro-servizi-e-la-loro-architettura">Micro-servizi e la loro
architettura</h2>
<h3 id="servizio-per-gestione-utenti">Servizio per Gestione Utenti</h3>
<div id="tab:user_serv_table">
<table>
<caption>Tabella descrittiva User Service</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Linguaggio</td>
<td style="text-align: left;">Node.JS/TypeScript</td>
</tr>
<tr class="even">
<td style="text-align: left;">Framework</td>
<td style="text-align: left;">NestJS</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Persistence</td>
<td style="text-align: left;">Mysql</td>
</tr>
<tr class="even">
<td style="text-align: left;">Librerie</td>
<td style="text-align: left;">TypeORM</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Architettura</td>
<td style="text-align: left;">Model-Controller-service</td>
</tr>
</tbody>
</table>
</div>
<h3 id="servizio-business-logic">Servizio Business Logic</h3>
<div id="tab:bl_serv_table">
<table>
<caption>Tabella descrittiva Business Logic</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Linguaggio</td>
<td style="text-align: left;">Node.JS/TypeScript</td>
</tr>
<tr class="even">
<td style="text-align: left;">Framework</td>
<td style="text-align: left;">NestJS</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Architettura</td>
<td style="text-align: left;">Model-Controller-service</td>
</tr>
</tbody>
</table>
</div>
<h3 id="servizio-ponte-tra-i-microservizi">Servizio ponte tra i
microservizi</h3>
<div id="tab:middleware_serv_table">
<table>
<caption>Tabella descrittiva Middleware</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Linguaggio</td>
<td style="text-align: left;">Java</td>
</tr>
<tr class="even">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">Vertx</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Librerie</td>
<td style="text-align: left;">RabbitMQ(vertx)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Architettura</td>
<td style="text-align: left;">Multi-agent, motore di gioco</td>
</tr>
</tbody>
</table>
</div>
<h2 id="dsspe-perche-i-microservizi">[DS/SPE] Perche’ i
microservizi?</h2>
<p>Ogni microservizio si occupa di gestire un singolo ambito di
progetto, il che fa sì che si ottengano ottimi risultati riguardo la
qualità e l’affidabilità, la riutilizzabilità, la flessibilità e la
scalabilità. Tutti i componenti sono "loosely coupled", distribuiti in
modo indipendente, altamente collaudabili e gestibili e in ambiti reali
gestiti da un piccolo team. Tuttavia, non si tratta di una soluzione
definitiva, ha anche degli svantaggi come ad esempio:</p>
<ul>
<li><p>la complessità di gestione e la necessità di un’infrastruttura di
rete molto complessa.</p></li>
<li><p>un’ottima comunicazione di team.</p></li>
<li><p>una discreta capacità di astrazione e progettazione di
interfaccie di comunicazione che devono essere rispettate da tutti i
microservizi.</p></li>
<li><p>Non si ha la certezza che l’infrastruttura funzioni correttamente
fino a quando tutti i servizi non cooperano tra loro.</p></li>
</ul>
<h3 id="vantaggi-dellarchitettura-a-microservizi">Vantaggi
dell’architettura a microservizi</h3>
<h4 id="fault-tolerance">Fault Tolerance</h4>
<p>Progettare un sistema completamente privo di errori è un obiettivo
decisamente ambizioso e molto difficile da raggiungere. Molto più
realistico, e inerente al nostro percorso, è progettare un sistema che
sia in grado di tollerare, nella giusta misura, gli errori che
inevitabilmente si verificheranno. La scelta di questa architettura tra
i vari vantaggi offre la possibilità di <strong>isolare parti del
sistema</strong>, evitando che gli errori si propaghino in modo
incontrollato e che il sistema nel suo complesso vada in crash. Ogni
sistema opera in modo indipendente e autonomo, con le proprie risorse e
la propria logica.</p>
<p>Lo snodo centrale di comunicazione dei servizi, il middleware, è in
grado di gestire le comunicazioni tra i vari microservizi e di garantire
che il sistema sia in grado di funzionare anche in caso di guasti.
Purtroppo non esiste alcun progetto senza alcun tipo di <strong>single
point of failure</strong>, o almeno non con le risorse a disposizione di
noi studenti, quindi all’interno di questo servizio la gestione degli
errori dei servizi con cui comunica è gestita, ma di fatto, nel caso in
cui il middleware smetta di funzionare, non avendo nessun altro servizio
che possa fare da garante per il suo corretto funzionamento, tutto il
sistema non permetterà, ad esempio, di giocare a nessun gioco. Questo
perché il middleware è il cuore pulsante del sistema; avendo
disponibilità di risorse e abbastanza conoscenze in un ambito reale,
questo problema ha soluzioni:</p>
<ul>
<li><p><strong>Backup del middleware</strong>: avere dei backup dei
processi che si occupano di gestire le partite, ma questo
significherebbe andare a modificare inevitabilmente la struttura già
esistente del servizio.</p></li>
<li><p><strong>Ridondanza del middleware</strong>: avere molteplici
istanze del middleware, preferibilmente 3, di cui una principale e le
altre 2 in copia, facendo in modo che ogni azione sul middleware
principale venga replicata sulle altre due istanze e che quindi, in caso
di guasto hardware, le altre copie possano rispondere alle
richieste.</p></li>
</ul>
<h4 id="scalabilità">Scalabilità</h4>
<p>Nel caso del middleware, la scalabilità è un altro modo per chiamare
la duplicazione, ma questo si applica soltanto al middleware, in quanto
gli altri microservizi sono realmente scalabili. Ogni microservizio è in
grado di scalare in modo indipendente, in base alle proprie esigenze, e
questo permette di avere un sistema che si adatta in modo dinamico alle
richieste degli utenti. Nella prossima sezione verrà approfondito come
il deployment con Docker permetta di scalare i microservizi.
L’implementazione di un sistema di load balancing viene fornita
"gratuitamente" da Kubernetes, che permette di bilanciare il carico tra
i vari nodi del cluster. Qualora il progetto maraffa-online dovesse
avere un numero di utenti molto elevato, si potrebbe pensare di scalare
il sistema in modo orizzontale, aggiungendo nuovi nodi al cluster, e
tramite la dovuta configurazione, Kubernetes si occuperebbe di
bilanciare il carico tra i vari nodi dei servizi scalabili.</p>
<h4 id="docker">Docker</h4>
<p>Suddividere un progetto monolitico in servizi a sé stanti permette di
dockerizzare comodamente ogni servizio, e questo consente di avere un
sistema facilmente deployabile, versionabile e portabile. Uno dei
requisiti fondamentali del progetto era riuscire a dockerizzare
interamente il sistema. Nel caso in cui si volesse fare un deploy su un
server remoto, sarebbe sufficiente avere Docker installato, accedere al
docker-compose del progetto, settare le corrette variabili d’ambiente e
poi il progetto opererebbe in totale autonomia. Inoltre, utilizzare uno
stack permette anche di gestire eventuali failure dei servizi in modo
più semplice, poiché Docker consente di avere un sistema fault-tolerant.
Se un servizio dovesse andare in crash per qualche motivo inspiegabile,
Docker si occuperebbe di riavviarlo in modo autonomo. L’utilizzo di uno
stack permette anche di scalare i servizi in modo più semplice, poiché
basta settare il numero di repliche desiderate per un servizio e Docker
si occuperà di creare le repliche e di bilanciare il carico tra di esse.
Questo è un vantaggio nel caso in cui si voglia scalare il sistema in
modo verticale, ovvero aumentando le risorse di un singolo servizio.</p>
<h2 id="servizi-di-business-logic-e-user-service">Servizi di Business
Logic e User Service</h2>
<p>Entrambi questi servizi sono stati realizzati con lo stack NestJS, un
framework per Node.js che semplifica la realizzazione di web server e
API REST. Si occupano rispettivamente di gestire la logica di gioco e la
gestione degli utenti che vogliono utilizzare il sistema, due core
business del progetto.</p>
<h3 id="business-logic">Business Logic</h3>
<p>Questo servizio mantiene al proprio interno tutte le regole del gioco
e il calcolo dei punteggi. Ha svariati endpoint che permettono al
middleware di avere il minor numero possibile di responsabilità,
delegando al servizio di business logic le operazioni riguardanti il
gioco.</p>
<p>Questa scelta è stata fatta per mantenere il middleware il più
leggero possibile e per evitare che si occupi di operazioni non di sua
competenza. Inoltre, in futuro sarà possibile aggiungere nuovi giochi
modificando il meno possibile il middleware, che dovrà semplicemente
occuparsi della gestione delle partite e comunicare tempestivamente con
i servizi di business logic in base al gioco scelto.</p>
<h3 id="user-service">User Service</h3>
<p>Questo servizio gestisce gli utenti, quindi la loro registrazione,
autenticazione e gestione dei dati personali. Anche in questo caso, il
middleware delega al servizio di gestione degli utenti le operazioni
riguardanti gli utenti, per mantenere il middleware il più leggero
possibile e per evitare che si occupi di operazioni non di sua
competenza. Il core di questo servizio è dato dalla combinazione di
NestJS e TypeORM, che permettono di gestire in modo semplice e veloce la
persistenza dei dati e le operazioni CRUD su un database MySQL. Oltre
alle informazioni degli utenti, il database contiene anche le
informazioni riguardanti le partite giocate e le statistiche personali
di ogni utente del sistema.</p>
<h2 id="front-end">Front-End</h2>
<p>Il front-end è stato realizzato con Angular e si occupa di gestire
l’interfaccia grafica e la comunicazione con il middleware. Sono state
realizzate diverse pagine, tra cui la home page, la pagina di
registrazione, la pagina di login, la pagina di gioco e la pagina di
profilo utente. Utilizza API REST per comunicare con il middleware e
ottenere i dati necessari per il funzionamento del gioco, mentre
utilizza WebSockets per la comunicazione in tempo reale con il
middleware.</p>
<h2 id="middleware">Middleware</h2>
<p>Come già citato, il middleware è il cuore del sistema. L’architettura
utilizzata per la gestione delle partite è quella di un multi-agente, in
cui ogni agente si occupa di gestire una partita e di orchestrare la
comunicazione con gli altri servizi, come ad esempio il front-end.
Questo core è stato realizzato con Vertx, che è stato utilizzato anche
per creare un web-server in Java.</p>
<p>Inoltre, al middleware è collegato un database NoSQL su MongoDB, che
viene aggiornato a ogni trick completato dai giocatori per creare uno
storico delle partite e salvare le loro decisioni in gioco. Questa
raccolta di dati sarà parte di uno sviluppo futuro, in cui, dopo aver
raccolto una grande quantità di dati di partite, si potrà tentare di
creare un modello di machine learning per sviluppare un’intelligenza
artificiale che possa giocare al posto di un giocatore umano.</p>
<h3 id="struttura-api-gateway">Struttura API Gateway</h3>
<h2 id="punti-comuni-tra-i-servizi">Punti comuni tra i servizi</h2>
<h1 id="ch:interazioni">Interazioni</h1>
<p>interazioni tra i componenti, come comunicano, diagrammi d’attività.
(parlare di api gateway (permette comunicazione tra client esterni con i
microservizi, redireziona le richieste ai servizi))</p>
<h1 id="ch:implementazione">Implementazione</h1>
<p>parla di decomposizione delle funzionalità in microservizi dipendenze
minime tra i servizi reattività agli eventi</p>
<h2 id="tecnologie">Tecnologie</h2>
<p>(swagger, postman, autogenerazione javadoc?, rabbitMQ, JWT per
autenticazione utenti, docker, nodejs, typescript, mongodb, jest,
angular, figma, ...)</p>
<h2
id="parte-di-distribuiti-che-non-so-dove-mettere-sta-nellimpl-p.s.-dargli-un-nome-decente">Parte
di distribuiti che non so dove mettere, sta nell’impl? p.s. dargli un
nome decente</h2>
<p>FAULT DETECTION (con node nel cluster, nel nostro caso?)/TOLLERANCE
SCALABILITà? verificare la scalabilità orizzontale (aumento richieste in
un periodo)? PERSISTENZA CONSISTENZA AFFIDABILITà FAULTS (GIOCATORE SI
DISCONNETTE NEL MEZZO DELLA PARTITA) IL SISTEMA SI BLOCCA IN CASO DI
ERRORI? **GUARDA L’ESEMPIO DI POLITICHE AUTOVALUTAZIONE
NELL’ANALISI**</p>
<p>monitoraggio per osservare stato attuale sistema (mi sa che noi non
l’abbiamo)</p>
<h2 id="screen">Screen</h2>
<h2 id="optionalmockup">Optional(Mockup)</h2>
<h1 id="ch:DevOps">DevOps</h1>
<h2 id="git-wordkflow">Git wordkflow</h2>
<h2 id="issue-template">Issue template</h2>
<p>-per discutere l’impl di una nuova idea, sottomettere feature
proposal, reporting bugs e malfunzionamenti, elaborare nuove impl [il
tip above non l’ho inserito nella relazione di SPE]</p>
<h2 id="continuous-integration">Continuous integration</h2>
<p>-ci (GHA, deploy pages, usato due servizi di hosting github e gitlab
(per copia all’intero di repo di magnani))</p>
<h2 id="build-automation">Build automation</h2>
<h1 id="ch:validazione">Validazione</h1>
<p>test driven development self-assessment/autovalidazione (fai i test
unit e integrazione con jest) Ma noi usiamo Lint e Prettier??? -vuole
che i test della ci siano runnati il più frequentemente possibile (bot
git che li runna?)</p>
<h1 id="ch:deployment">Deployment</h1>
<h2 id="deployment">deployment</h2>
<p>containerizzation</p>
<h1 id="ch:con">Conclusions and Future Work</h1>
<h2 id="conclusions">Conclusions</h2>
<p>Typically a conclusions chapter first summarizes the investigated
problem and its aims and objectives. It summaries the
critical/significant/major findings/results about the aims and
objectives that have been obtained by applying the key
methods/implementations/experiment set-ups. A conclusions chapter draws
a picture/outline of your project’s central and the most signification
contributions and achievements.</p>
<p>A good conclusions summary could be approximately 300–500 words long,
but this is just a recommendation.</p>
<p>A conclusions chapter followed by an abstract is the last things you
write in your project report.</p>
<h2 id="future-work">Future work</h2>
<p>This section should refer to Chapter <a href="#ch:results"
data-reference-type="ref" data-reference="ch:results">[ch:results]</a>
where the author has reflected their criticality about their own
solution. The future work is then sensibly proposed in this section.</p>
<p><strong>Guidance on writing future work:</strong> While working on a
project, you gain experience and learn the potential of your project and
its future works. Discuss the future work of the project in technical
terms. This has to be based on what has not been yet achieved in
comparison to what you had initially planned and what you have learned
from the project. Describe to a reader what future work(s) can be
started from the things you have completed. This includes identifying
what has not been achieved and what could be achieved.</p>
<p>A good future work summary could be approximately 300–500 words long,
but this is just a recommendation.</p>
</body>
</html>
